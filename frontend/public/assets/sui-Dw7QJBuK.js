const __vite__fileDeps=["assets/index-Wia9RzHk.js","main.js","main.css","assets/create-8iCA8uMR.js","assets/chain-DNXEv05f.js","assets/index-tziHKHxR.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var Xn=Object.defineProperty;var Yn=(t,e,r)=>e in t?Xn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var se=(t,e,r)=>(Yn(t,typeof e!="symbol"?e+"":e,r),r);import{g as Qn,b4 as Ge,b5 as es,az as ts,aA as rs,aB as ns,aC as jt,aD as ss,aE as is,ax as Ur,aw as Fe,ay as as,b6 as os,b7 as cs,b8 as Kr,b9 as Mr,ba as Gr,bb as Zr,bc as ve,_ as Pr,aH as us}from"../main.js";import{C as ds,P as ls}from"./chain-DNXEv05f.js";function We(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function hs(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Yt(t,...e){if(!hs(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function Jr(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");We(t.outputLen),We(t.blockLen)}function Tt(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function fs(t,e){Yt(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pt=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);new Uint8Array(new Uint32Array([287454020]).buffer)[0];function gs(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Ze(t){return typeof t=="string"&&(t=gs(t)),Yt(t),t}class Xr{clone(){return this._cloneInto()}}const ps={}.toString;function ys(t,e){if(e!==void 0&&ps.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function ms(t){const e=n=>t().update(Ze(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}class Yr extends Xr{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Jr(e);const n=Ze(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(e){return Tt(this),this.iHash.update(e),this}digestInto(e){Tt(this),Yt(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:a,outputLen:o}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=a,e.outputLen=o,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Qr=(t,e,r)=>new Yr(t,e).update(r).digest();Qr.create=(t,e)=>new Yr(t,e);function ws(t,e,r,n){Jr(t);const s=ys({dkLen:32,asyncTick:10},n),{c:i,dkLen:a,asyncTick:o}=s;if(We(i),We(a),We(o),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=Ze(e),d=Ze(r),h=new Uint8Array(a),l=Qr.create(t,c),g=l._cloneInto().update(d);return{c:i,dkLen:a,asyncTick:o,DK:h,PRF:l,PRFSalt:g}}function bs(t,e,r,n,s){return t.destroy(),e.destroy(),n&&n.destroy(),s.fill(0),r}function Ss(t,e,r,n){const{c:s,dkLen:i,DK:a,PRF:o,PRFSalt:c}=ws(t,e,r,n);let d;const h=new Uint8Array(4),l=pt(h),g=new Uint8Array(o.outputLen);for(let y=1,m=0;m<i;y++,m+=o.outputLen){const w=a.subarray(m,m+o.outputLen);l.setInt32(0,y,!1),(d=c._cloneInto(d)).update(h).digestInto(g),w.set(g.subarray(0,w.length));for(let b=1;b<s;b++){o._cloneInto(d).update(g).digestInto(g);for(let k=0;k<w.length;k++)w[k]^=g[k]}}return bs(o,c,a,d,g)}function Ts(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),a=Number(r>>s&i),o=Number(r&i),c=n?4:0,d=n?0:4;t.setUint32(e+c,a,n),t.setUint32(e+d,o,n)}class xs extends Xr{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=pt(this.buffer)}update(e){Tt(this);const{view:r,buffer:n,blockLen:s}=this;e=Ze(e);const i=e.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const c=pt(e);for(;s<=i-a;a+=s)this.process(c,a);continue}n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Tt(this),fs(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(n,0),a=0);for(let l=a;l<s;l++)r[l]=0;Ts(n,s-8,BigInt(this.length*8),i),this.process(n,0);const o=pt(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,h=this.get();if(d>h.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<d;l++)o.setUint32(4*l,h[l],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:a,pos:o}=this;return e.length=s,e.pos=o,e.finished=i,e.destroyed=a,s%r&&e.buffer.set(n),e}}const ut=BigInt(2**32-1),Lt=BigInt(32);function en(t,e=!1){return e?{h:Number(t&ut),l:Number(t>>Lt&ut)}:{h:Number(t>>Lt&ut)|0,l:Number(t&ut)|0}}function Es(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:a}=en(t[s],e);[r[s],n[s]]=[i,a]}return[r,n]}const vs=(t,e)=>BigInt(t>>>0)<<Lt|BigInt(e>>>0),ks=(t,e,r)=>t>>>r,Is=(t,e,r)=>t<<32-r|e>>>r,_s=(t,e,r)=>t>>>r|e<<32-r,As=(t,e,r)=>t<<32-r|e>>>r,Bs=(t,e,r)=>t<<64-r|e>>>r-32,Os=(t,e,r)=>t>>>r-32|e<<64-r,Cs=(t,e)=>e,js=(t,e)=>t,Us=(t,e,r)=>t<<r|e>>>32-r,Ms=(t,e,r)=>e<<r|t>>>32-r,Ps=(t,e,r)=>e<<r-32|t>>>64-r,Rs=(t,e,r)=>t<<r-32|e>>>64-r;function $s(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const Ns=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Ds=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Ls=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),zs=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,Vs=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),Hs=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,S={fromBig:en,split:Es,toBig:vs,shrSH:ks,shrSL:Is,rotrSH:_s,rotrSL:As,rotrBH:Bs,rotrBL:Os,rotr32H:Cs,rotr32L:js,rotlSH:Us,rotlSL:Ms,rotlBH:Ps,rotlBL:Rs,add:$s,add3L:Ns,add3H:Ds,add4L:Ls,add4H:zs,add5H:Hs,add5L:Vs},[Fs,Ws]=S.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),ye=new Uint32Array(80),me=new Uint32Array(80);class qs extends xs{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:a,Dh:o,Dl:c,Eh:d,El:h,Fh:l,Fl:g,Gh:y,Gl:m,Hh:w,Hl:b}=this;return[e,r,n,s,i,a,o,c,d,h,l,g,y,m,w,b]}set(e,r,n,s,i,a,o,c,d,h,l,g,y,m,w,b){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=o|0,this.Dl=c|0,this.Eh=d|0,this.El=h|0,this.Fh=l|0,this.Fl=g|0,this.Gh=y|0,this.Gl=m|0,this.Hh=w|0,this.Hl=b|0}process(e,r){for(let T=0;T<16;T++,r+=4)ye[T]=e.getUint32(r),me[T]=e.getUint32(r+=4);for(let T=16;T<80;T++){const R=ye[T-15]|0,N=me[T-15]|0,D=S.rotrSH(R,N,1)^S.rotrSH(R,N,8)^S.shrSH(R,N,7),V=S.rotrSL(R,N,1)^S.rotrSL(R,N,8)^S.shrSL(R,N,7),L=ye[T-2]|0,ce=me[T-2]|0,ot=S.rotrSH(L,ce,19)^S.rotrBH(L,ce,61)^S.shrSH(L,ce,6),Ot=S.rotrSL(L,ce,19)^S.rotrBL(L,ce,61)^S.shrSL(L,ce,6),ct=S.add4L(V,Ot,me[T-7],me[T-16]),Ct=S.add4H(ct,D,ot,ye[T-7],ye[T-16]);ye[T]=Ct|0,me[T]=ct|0}let{Ah:n,Al:s,Bh:i,Bl:a,Ch:o,Cl:c,Dh:d,Dl:h,Eh:l,El:g,Fh:y,Fl:m,Gh:w,Gl:b,Hh:k,Hl:B}=this;for(let T=0;T<80;T++){const R=S.rotrSH(l,g,14)^S.rotrSH(l,g,18)^S.rotrBH(l,g,41),N=S.rotrSL(l,g,14)^S.rotrSL(l,g,18)^S.rotrBL(l,g,41),D=l&y^~l&w,V=g&m^~g&b,L=S.add5L(B,N,V,Ws[T],me[T]),ce=S.add5H(L,k,R,D,Fs[T],ye[T]),ot=L|0,Ot=S.rotrSH(n,s,28)^S.rotrBH(n,s,34)^S.rotrBH(n,s,39),ct=S.rotrSL(n,s,28)^S.rotrBL(n,s,34)^S.rotrBL(n,s,39),Ct=n&i^n&o^i&o,Jn=s&a^s&c^a&c;k=w|0,B=b|0,w=y|0,b=m|0,y=l|0,m=g|0,{h:l,l:g}=S.add(d|0,h|0,ce|0,ot|0),d=o|0,h=c|0,o=i|0,c=a|0,i=n|0,a=s|0;const jr=S.add3L(ot,ct,Jn);n=S.add3H(jr,ce,Ot,Ct),s=jr|0}({h:n,l:s}=S.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:a}=S.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:o,l:c}=S.add(this.Ch|0,this.Cl|0,o|0,c|0),{h:d,l:h}=S.add(this.Dh|0,this.Dl|0,d|0,h|0),{h:l,l:g}=S.add(this.Eh|0,this.El|0,l|0,g|0),{h:y,l:m}=S.add(this.Fh|0,this.Fl|0,y|0,m|0),{h:w,l:b}=S.add(this.Gh|0,this.Gl|0,w|0,b|0),{h:k,l:B}=S.add(this.Hh|0,this.Hl|0,k|0,B|0),this.set(n,s,i,a,o,c,d,h,l,g,y,m,w,b,k,B)}roundClean(){ye.fill(0),me.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ks=ms(()=>new qs);/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */function tn(t){if(typeof t!="string")throw new TypeError(`Invalid mnemonic type: ${typeof t}`);return t.normalize("NFKD")}function Gs(t){const e=tn(t),r=e.split(" ");if(![12,15,18,21,24].includes(r.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:r}}const Zs=t=>tn(`mnemonic${t}`);function Js(t,e=""){return Ss(Ks,Gs(t).nfkd,Zs(e),{c:2048,dkLen:64})}function Xs(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=n}var a=t.length,o=t.charAt(0),c=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function h(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var m=0,w=0,b=0,k=y.length;b!==k&&y[b]===0;)b++,m++;for(var B=(k-b)*d+1>>>0,T=new Uint8Array(B);b!==k;){for(var R=y[b],N=0,D=B-1;(R!==0||N<w)&&D!==-1;D--,N++)R+=256*T[D]>>>0,T[D]=R%a>>>0,R=R/a>>>0;if(R!==0)throw new Error("Non-zero carry");w=N,b++}for(var V=B-w;V!==B&&T[V]===0;)V++;for(var L=o.repeat(m);V<B;++V)L+=t.charAt(T[V]);return L}function l(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;for(var m=0,w=0,b=0;y[m]===o;)w++,m++;for(var k=(y.length-m)*c+1>>>0,B=new Uint8Array(k);y[m];){var T=e[y.charCodeAt(m)];if(T===255)return;for(var R=0,N=k-1;(T!==0||R<b)&&N!==-1;N--,R++)T+=a*B[N]>>>0,B[N]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");b=R,m++}for(var D=k-b;D!==k&&B[D]===0;)D++;for(var V=new Uint8Array(w+(k-D)),L=w;D!==k;)V[L++]=B[D++];return V}function g(y){var m=l(y);if(m)return m;throw new Error("Non-base"+a+" character")}return{encode:h,decodeUnsafe:l,decode:g}}var Ys=Xs;const Qs=Ys,ei="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var ti=Qs(ei);const rn=Qn(ti),rt=t=>rn.encode(t),nt=t=>rn.decode(t);function re(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}const Ut=8192;function W(t){if(t.length<Ut)return btoa(String.fromCharCode(...t));let e="";for(var r=0;r<t.length;r+=Ut){const n=t.slice(r,r+Ut);e+=String.fromCharCode(...n)}return btoa(e)}function st(t){var s;const e=t.startsWith("0x")?t.slice(2):t,n=((s=(e.length%2===0?e:`0${e}}`).match(/.{2}/g))==null?void 0:s.map(i=>parseInt(i,16)))??[];return Uint8Array.from(n)}function Oe(t){return t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"")}function Qt(t){let e=[],r=0;if(t===0)return[0];for(;t>0;)e[r]=t&127,(t>>=7)&&(e[r]|=128),r+=1;return e}function ri(t){let e=0,r=0,n=0;for(;;){let s=t[n];if(n+=1,e|=(s&127)<<r,!(s&128))break;r+=7}return{value:e,length:n}}class nn{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),n=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let e=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}read256(){let e=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+n).toString(10)}readBytes(e){let r=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,r,e);return this.shift(e),n}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,e),{value:n,length:s}=ri(r);return this.shift(s),n}readVec(e){let r=this.readULEB(),n=[];for(let s=0;s<r;s++)n.push(e(this,s,r));return n}}function ni(t,e){switch(e){case"base58":return rt(t);case"base64":return W(t);case"hex":return Oe(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function si(t,e){switch(e){case"base58":return nt(t);case"base64":return re(t);case"hex":return st(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function sn(t,e=["<",">"]){const[r,n]=e,s=[];let i="",a=0;for(let o=0;o<t.length;o++){const c=t[o];if(c===r&&a++,c===n&&a--,a===0&&c===","){s.push(i.trim()),i="";continue}i+=c}return s.push(i.trim()),s}class an{constructor({size:e=1024,maxSize:r,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=r||e,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const r=this.bytePosition+e;if(r>this.size){const n=Math.min(this.maxSize,this.size+this.allocateSize);if(r>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${r}`);this.size=n;const s=new ArrayBuffer(this.size);new Uint8Array(s).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(s)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return Mt(BigInt(e),8).forEach(r=>this.write8(r)),this}write128(e){return Mt(BigInt(e),16).forEach(r=>this.write8(r)),this}write256(e){return Mt(BigInt(e),32).forEach(r=>this.write8(r)),this}writeULEB(e){return Qt(e).forEach(r=>this.write8(r)),this}writeVec(e,r){return this.writeULEB(e.length),Array.from(e).forEach((n,s)=>r(this,n,s,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return ni(this.toBytes(),e)}}function Mt(t,e){let r=new Uint8Array(e),n=0;for(;t>0;)r[n]=Number(t%BigInt(256)),t=t/BigInt(256),n+=1;return r}var on=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Y=(t,e,r)=>(on(t,e,"read from private field"),r?r.call(t):e.get(t)),xt=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Et=(t,e,r,n)=>(on(t,e,"write to private field"),e.set(t,r),r),Ce,De,yt,be;const cn=class{constructor(t){xt(this,Ce,void 0),xt(this,De,void 0),this.name=t.name,this.read=t.read,this.serializedSize=t.serializedSize??(()=>null),Et(this,Ce,t.write),Et(this,De,t.serialize??((e,r)=>{const n=new an({size:this.serializedSize(e)??void 0,...r});return Y(this,Ce).call(this,e,n),n.toBytes()})),this.validate=t.validate??(()=>{})}write(t,e){this.validate(t),Y(this,Ce).call(this,t,e)}serialize(t,e){return this.validate(t),new ii(this,Y(this,De).call(this,t,e))}parse(t){const e=new nn(t);return this.read(e)}transform({name:t,input:e,output:r}){return new cn({name:t??this.name,read:n=>r(this.read(n)),write:(n,s)=>Y(this,Ce).call(this,e(n),s),serializedSize:n=>this.serializedSize(e(n)),serialize:(n,s)=>Y(this,De).call(this,e(n),s),validate:n=>this.validate(e(n))})}};let ee=cn;Ce=new WeakMap;De=new WeakMap;const un=Symbol.for("@mysten/serialized-bcs");function er(t){return!!t&&typeof t=="object"&&t[un]===!0}class ii{constructor(e,r){xt(this,yt,void 0),xt(this,be,void 0),Et(this,yt,e),Et(this,be,r)}get[un](){return!0}toBytes(){return Y(this,be)}toHex(){return Oe(Y(this,be))}toBase64(){return W(Y(this,be))}toBase58(){return rt(Y(this,be))}parse(){return Y(this,yt).parse(Y(this,be))}}yt=new WeakMap;be=new WeakMap;function vt({size:t,...e}){return new ee({...e,serializedSize:()=>t})}function Pt({readMethod:t,writeMethod:e,...r}){return vt({...r,read:n=>n[t](),write:(n,s)=>s[e](n),validate:n=>{var s;if(n<0||n>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${n}. Expected value in range 0-${r.maxValue}`);(s=r.validate)==null||s.call(r,n)}})}function Rt({readMethod:t,writeMethod:e,...r}){return vt({...r,read:n=>n[t](),write:(n,s)=>s[e](BigInt(n)),validate:n=>{var i;const s=BigInt(n);if(s<0||s>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${s}. Expected value in range 0-${r.maxValue}`);(i=r.validate)==null||i.call(r,s)}})}function ai({serialize:t,...e}){const r=new ee({...e,serialize:t,write:(n,s)=>{for(const i of r.serialize(n).toBytes())s.write8(i)}});return r}function oi({toBytes:t,fromBytes:e,...r}){return new ee({...r,read:n=>{const s=n.readULEB(),i=n.readBytes(s);return e(i)},write:(n,s)=>{const i=t(n);s.writeULEB(i.length);for(let a=0;a<i.length;a++)s.write8(i[a])},serialize:n=>{const s=t(n),i=Qt(s.length),a=new Uint8Array(i.length+s.length);return a.set(i,0),a.set(s,i.length),a},validate:n=>{var s;if(typeof n!="string")throw new TypeError(`Invalid ${r.name} value: ${n}. Expected string`);(s=r.validate)==null||s.call(r,n)}})}function ci(t){let e=null;function r(){return e||(e=t()),e}return new ee({name:"lazy",read:n=>r().read(n),serializedSize:n=>r().serializedSize(n),write:(n,s)=>r().write(n,s),serialize:(n,s)=>r().serialize(n,s).toBytes()})}const u={u8(t){return Pt({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return Pt({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return Pt({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return Rt({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return Rt({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return Rt({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return vt({name:"bool",size:1,read:e=>e.read8()===1,write:(e,r)=>r.write8(e?1:0),...t,validate:e=>{var r;if((r=t==null?void 0:t.validate)==null||r.call(t,e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(t){return ai({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(Qt(e)),...t})},bytes(t,e){return vt({name:`bytes[${t}]`,size:t,read:r=>r.readBytes(t),write:(r,n)=>{for(let s=0;s<t;s++)n.write8(r[s]??0)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)}})},string(t){return oi({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...t})},fixedArray(t,e,r){return new ee({name:`${e.name}[${t}]`,read:n=>{const s=new Array(t);for(let i=0;i<t;i++)s[i]=e.read(n);return s},write:(n,s)=>{for(const i of n)e.write(i,s)},...r,validate:n=>{var s;if((s=r==null?void 0:r.validate)==null||s.call(r,n),!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t)throw new TypeError(`Expected array of length ${t}, found ${n.length}`)}})},option(t){return u.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>"Some"in e?e.Some:null})},vector(t,e){return new ee({name:`vector<${t.name}>`,read:r=>{const n=r.readULEB(),s=new Array(n);for(let i=0;i<n;i++)s[i]=t.read(r);return s},write:(r,n)=>{n.writeULEB(r.length);for(const s of r)t.write(s,n)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`)}})},tuple(t,e){return new ee({name:`(${t.map(r=>r.name).join(", ")})`,serializedSize:r=>{let n=0;for(let s=0;s<t.length;s++){const i=t[s].serializedSize(r[s]);if(i==null)return null;n+=i}return n},read:r=>{const n=[];for(const s of t)n.push(s.read(r));return n},write:(r,n)=>{for(let s=0;s<t.length;s++)t[s].write(r[s],n)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!Array.isArray(r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${r.length}`)}})},struct(t,e,r){const n=Object.entries(e);return new ee({name:t,serializedSize:s=>{let i=0;for(const[a,o]of n){const c=o.serializedSize(s[a]);if(c==null)return null;i+=c}return i},read:s=>{const i={};for(const[a,o]of n)i[a]=o.read(s);return i},write:(s,i)=>{for(const[a,o]of n)o.write(s[a],i)},...r,validate:s=>{var i;if((i=r==null?void 0:r.validate)==null||i.call(r,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`)}})},enum(t,e,r){const n=Object.entries(e);return new ee({name:t,read:s=>{const i=s.readULEB(),[a,o]=n[i];return{[a]:(o==null?void 0:o.read(s))??!0}},write:(s,i)=>{const[a,o]=Object.entries(s)[0];for(let c=0;c<n.length;c++){const[d,h]=n[c];if(d===a){i.writeULEB(c),h==null||h.write(o,i);return}}},...r,validate:s=>{var o;if((o=r==null?void 0:r.validate)==null||o.call(r,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`);const i=Object.keys(s);if(i.length!==1)throw new TypeError(`Expected object with one key, found ${i.length}`);const[a]=i;if(!Object.hasOwn(e,a))throw new TypeError(`Invalid enum variant ${a}`)}})},map(t,e){return u.vector(u.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:r=>[...r.entries()],output:r=>{const n=new Map;for(const[s,i]of r)n.set(s,i);return n}})},generic(t,e){return(...r)=>e(...r).transform({name:`${e.name}<${r.map(n=>n.name).join(", ")}>`,input:n=>n,output:n=>n})},lazy(t){return ci(t)}},ui=32,Le=class{constructor(t){if(this.types=new Map,this.counter=0,t instanceof Le){this.schema=t.schema,this.types=new Map(t.types);return}if(this.schema=t,this.registerAddressType(Le.ADDRESS,t.addressLength,t.addressEncoding),this.registerVectorType(t.vectorType),t.types&&t.types.structs)for(let e of Object.keys(t.types.structs))this.registerStructType(e,t.types.structs[e]);if(t.types&&t.types.enums)for(let e of Object.keys(t.types.enums))this.registerEnumType(e,t.types.enums[e]);if(t.types&&t.types.aliases)for(let e of Object.keys(t.types.aliases))this.registerAlias(e,t.types.aliases[e]);t.withPrimitives!==!1&&di(this)}tempKey(){return`bcs-struct-${++this.counter}`}ser(t,e,r){if(typeof t=="string"||Array.isArray(t)){const{name:n,params:s}=this.parseTypeName(t);return this.getTypeInterface(n).encode(this,e,r,s)}if(typeof t=="object"){const n=this.tempKey();return new Le(this).registerStructType(n,t).ser(n,e,r)}throw new Error(`Incorrect type passed into the '.ser()' function. 
${JSON.stringify(t)}`)}de(t,e,r){if(typeof e=="string")if(r)e=si(e,r);else throw new Error("To pass a string to `bcs.de`, specify encoding");if(typeof t=="string"||Array.isArray(t)){const{name:n,params:s}=this.parseTypeName(t);return this.getTypeInterface(n).decode(this,e,s)}if(typeof t=="object"){const n=new Le(this),s=this.tempKey();return n.registerStructType(s,t).de(s,e,r)}throw new Error(`Incorrect type passed into the '.de()' function. 
${JSON.stringify(t)}`)}hasType(t){return this.types.has(t)}registerAlias(t,e){return this.types.set(t,e),this}registerType(t,e,r,n=()=>!0){const{name:s,params:i}=this.parseTypeName(t);return this.types.set(s,{encode(a,o,c,d){const h=i.reduce((l,g,y)=>Object.assign(l,{[g]:d[y]}),{});return this._encodeRaw.call(a,new an(c),o,d,h)},decode(a,o,c){const d=i.reduce((h,l,g)=>Object.assign(h,{[l]:c[g]}),{});return this._decodeRaw.call(a,new nn(o),c,d)},_encodeRaw(a,o,c,d){if(n(o))return e.call(this,a,o,c,d);throw new Error(`Validation failed for type ${s}, data: ${o}`)},_decodeRaw(a,o,c){return r.call(this,a,o,c)}}),this}registerBcsType(t,e){return this.registerType(t,(r,n,s)=>{const i=s.map(a=>new ee({name:String(a),write:(o,c)=>{const{name:d,params:h}=this.parseTypeName(a),l=this.getTypeInterface(d),g=h.reduce((y,m,w)=>Object.assign(y,{[m]:s[w]}),{});return l._encodeRaw.call(this,c,o,h,g)},read:()=>{throw new Error("Not implemented")}}));return e(...i).write(n,r),r},(r,n)=>{const s=n.map(i=>new ee({name:String(i),write:(a,o)=>{throw new Error("Not implemented")},read:a=>{const{name:o,params:c}=this.parseTypeName(i),d=this.getTypeInterface(o),h=c.reduce((l,g,y)=>Object.assign(l,{[g]:n[y]}),{});return d._decodeRaw.call(this,a,c,h)}}));return e(...s).read(r)}),this}registerAddressType(t,e,r="hex"){switch(r){case"base64":return this.registerType(t,function(s,i){return re(i).reduce((a,o)=>a.write8(o),s)},function(s){return W(s.readBytes(e))});case"hex":return this.registerType(t,function(s,i){return st(i).reduce((a,o)=>a.write8(o),s)},function(s){return Oe(s.readBytes(e))});default:throw new Error("Unsupported encoding! Use either hex or base64")}}registerVectorType(t){let{name:e,params:r}=this.parseTypeName(t);if(r.length>1)throw new Error("Vector can have only one type parameter; got "+e);return this.registerType(t,function(s,i,a,o){return s.writeVec(i,(c,d)=>{let h=a[0];if(!h)throw new Error(`Incorrect number of type parameters passed a to vector '${t}'`);let{name:l,params:g}=this.parseTypeName(h);if(this.hasType(l))return this.getTypeInterface(l)._encodeRaw.call(this,c,d,g,o);if(!(l in o))throw new Error(`Unable to find a matching type definition for ${l} in vector; make sure you passed a generic`);let{name:y,params:m}=this.parseTypeName(o[l]);return this.getTypeInterface(y)._encodeRaw.call(this,c,d,m,o)})},function(s,i,a){return s.readVec(o=>{let c=i[0];if(!c)throw new Error(`Incorrect number of type parameters passed to a vector '${t}'`);let{name:d,params:h}=this.parseTypeName(c);if(this.hasType(d))return this.getTypeInterface(d)._decodeRaw.call(this,o,h,a);if(!(d in a))throw new Error(`Unable to find a matching type definition for ${d} in vector; make sure you passed a generic`);let{name:l,params:g}=this.parseTypeName(a[d]);return this.getTypeInterface(l)._decodeRaw.call(this,o,g,a)})})}registerStructType(t,e){for(let a in e){let o=this.tempKey(),c=e[a];!Array.isArray(c)&&typeof c!="string"&&(e[a]=o,this.registerStructType(o,c))}let r=Object.freeze(e),n=Object.keys(r),{name:s,params:i}=this.parseTypeName(t);return this.registerType(t,function(o,c,d,h){if(!c||c.constructor!==Object)throw new Error(`Expected ${s} to be an Object, got: ${c}`);if(d.length!==i.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${i.length}, got: ${d.length}`);for(let l of n){if(!(l in c))throw new Error(`Struct ${s} requires field ${l}:${r[l]}`);const{name:g,params:y}=this.parseTypeName(r[l]);if(!i.includes(g))this.getTypeInterface(g)._encodeRaw.call(this,o,c[l],y,h);else{const m=i.indexOf(g);let{name:w,params:b}=this.parseTypeName(d[m]);if(this.hasType(w)){this.getTypeInterface(w)._encodeRaw.call(this,o,c[l],b,h);continue}if(!(w in h))throw new Error(`Unable to find a matching type definition for ${w} in ${s}; make sure you passed a generic`);let{name:k,params:B}=this.parseTypeName(h[w]);this.getTypeInterface(k)._encodeRaw.call(this,o,c[l],B,h)}}return o},function(o,c,d){if(c.length!==i.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${i.length}, got: ${c.length}`);let h={};for(let l of n){const{name:g,params:y}=this.parseTypeName(r[l]);if(!i.includes(g))h[l]=this.getTypeInterface(g)._decodeRaw.call(this,o,y,d);else{const m=i.indexOf(g);let{name:w,params:b}=this.parseTypeName(c[m]);if(this.hasType(w)){h[l]=this.getTypeInterface(w)._decodeRaw.call(this,o,b,d);continue}if(!(w in d))throw new Error(`Unable to find a matching type definition for ${w} in ${s}; make sure you passed a generic`);let{name:k,params:B}=this.parseTypeName(d[w]);h[l]=this.getTypeInterface(k)._decodeRaw.call(this,o,B,d)}}return h})}registerEnumType(t,e){for(let a in e){let o=this.tempKey(),c=e[a];c!==null&&!Array.isArray(c)&&typeof c!="string"&&(e[a]=o,this.registerStructType(o,c))}let r=Object.freeze(e),n=Object.keys(r),{name:s,params:i}=this.parseTypeName(t);return this.registerType(t,function(o,c,d,h){if(!c)throw new Error(`Unable to write enum "${s}", missing data.
Received: "${c}"`);if(typeof c!="object")throw new Error(`Incorrect data passed into enum "${s}", expected object with properties: "${n.join(" | ")}".
Received: "${JSON.stringify(c)}"`);let l=Object.keys(c)[0];if(l===void 0)throw new Error(`Empty object passed as invariant of the enum "${s}"`);let g=n.indexOf(l);if(g===-1)throw new Error(`Unknown invariant of the enum "${s}", allowed values: "${n.join(" | ")}"; received "${l}"`);let y=n[g],m=r[y];if(o.write8(g),m===null)return o;let w=i.indexOf(m),b=w===-1?m:d[w];{let{name:k,params:B}=this.parseTypeName(b);return this.getTypeInterface(k)._encodeRaw.call(this,o,c[l],B,h)}},function(o,c,d){let h=o.readULEB(),l=n[h],g=r[l];if(h===-1)throw new Error(`Decoding type mismatch, expected enum "${s}" invariant index, received "${h}"`);if(g===null)return{[l]:!0};let y=i.indexOf(g),m=y===-1?g:c[y];{let{name:w,params:b}=this.parseTypeName(m);return{[l]:this.getTypeInterface(w)._decodeRaw.call(this,o,b,d)}}})}getTypeInterface(t){let e=this.types.get(t);if(typeof e=="string"){let r=[];for(;typeof e=="string";){if(r.includes(e))throw new Error(`Recursive definition found: ${r.join(" -> ")} -> ${e}`);r.push(e),e=this.types.get(e)}}if(e===void 0)throw new Error(`Type ${t} is not registered`);return e}parseTypeName(t){if(Array.isArray(t)){let[o,...c]=t;return{name:o,params:c}}if(typeof t!="string")throw new Error(`Illegal type passed as a name of the type: ${t}`);let[e,r]=this.schema.genericSeparators||["<",">"],n=t.indexOf(e),s=Array.from(t).reverse().indexOf(r);if(n===-1&&s===-1)return{name:t,params:[]};if(n===-1||s===-1)throw new Error(`Unclosed generic in name '${t}'`);let i=t.slice(0,n),a=sn(t.slice(n+1,t.length-s-1),this.schema.genericSeparators);return{name:i,params:a}}};let O=Le;O.U8="u8";O.U16="u16";O.U32="u32";O.U64="u64";O.U128="u128";O.U256="u256";O.BOOL="bool";O.VECTOR="vector";O.ADDRESS="address";O.STRING="string";O.HEX="hex-string";O.BASE58="base58-string";O.BASE64="base64-string";function di(t){t.registerType(O.U8,function(e,r){return e.write8(r)},function(e){return e.read8()},e=>e<256),t.registerType(O.U16,function(e,r){return e.write16(r)},function(e){return e.read16()},e=>e<65536),t.registerType(O.U32,function(e,r){return e.write32(r)},function(e){return e.read32()},e=>e<=4294967296n),t.registerType(O.U64,function(e,r){return e.write64(r)},function(e){return e.read64()}),t.registerType(O.U128,function(e,r){return e.write128(r)},function(e){return e.read128()}),t.registerType(O.U256,function(e,r){return e.write256(r)},function(e){return e.read256()}),t.registerType(O.BOOL,function(e,r){return e.write8(r)},function(e){return e.read8().toString(10)==="1"}),t.registerType(O.STRING,function(e,r){return e.writeVec(Array.from(r),(n,s)=>n.write8(s.charCodeAt(0)))},function(e){return e.readVec(r=>r.read8()).map(r=>String.fromCharCode(Number(r))).join("")},e=>!0),t.registerType(O.HEX,function(e,r){return e.writeVec(Array.from(st(r)),(n,s)=>n.write8(s))},function(e){let r=e.readVec(n=>n.read8());return Oe(new Uint8Array(r))}),t.registerType(O.BASE58,function(e,r){return e.writeVec(Array.from(nt(r)),(n,s)=>n.write8(s))},function(e){let r=e.readVec(n=>n.read8());return rt(new Uint8Array(r))}),t.registerType(O.BASE64,function(e,r){return e.writeVec(Array.from(re(r)),(n,s)=>n.write8(s))},function(e){let r=e.readVec(n=>n.read8());return W(new Uint8Array(r))})}function li(){return{genericSeparators:["<",">"],vectorType:"vector",addressLength:ui,addressEncoding:"hex"}}const hi=32;function Rr(t){try{return nt(t).length===hi}catch{return!1}}const it=32;function le(t){return fi(t)&&gi(t)===it}function dt(t){return le(t)}function C(t,e=!1){let r=t.toLowerCase();return!e&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(it*2,"0")}`}function ie(t,e=!1){return C(t,e)}function fi(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function gi(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}class pi extends TypeError{constructor(e,r){let n;const{message:s,explanation:i,...a}=e,{path:o}=e,c=o.length===0?s:`At path: ${o.join(".")} -- ${s}`;super(i??c),i!=null&&(this.cause=c),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...r()])}}function yi(t){return Z(t)&&typeof t[Symbol.iterator]=="function"}function Z(t){return typeof t=="object"&&t!=null}function J(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function mi(t){const{done:e,value:r}=t.next();return e?void 0:r}function wi(t,e,r,n){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:s,branch:i}=e,{type:a}=r,{refinement:o,message:c=`Expected a value of type \`${a}\`${o?` with refinement \`${o}\``:""}, but received: \`${J(n)}\``}=t;return{value:n,type:a,refinement:o,key:s[s.length-1],path:s,branch:i,...t,message:c}}function*$r(t,e,r,n){yi(t)||(t=[t]);for(const s of t){const i=wi(s,e,r,n);i&&(yield i)}}function*tr(t,e,r={}){const{path:n=[],branch:s=[t],coerce:i=!1,mask:a=!1}=r,o={path:n,branch:s};if(i&&(t=e.coercer(t,o),a&&e.type!=="type"&&Z(e.schema)&&Z(t)&&!Array.isArray(t)))for(const d in t)e.schema[d]===void 0&&delete t[d];let c="valid";for(const d of e.validator(t,o))d.explanation=r.message,c="not_valid",yield[d,void 0];for(let[d,h,l]of e.entries(t,o)){const g=tr(h,l,{path:d===void 0?n:[...n,d],branch:d===void 0?s:[...s,h],coerce:i,mask:a,message:r.message});for(const y of g)y[0]?(c=y[0].refinement!=null?"not_refined":"not_valid",yield[y[0],void 0]):i&&(h=y[1],d===void 0?t=h:t instanceof Map?t.set(d,h):t instanceof Set?t.add(h):Z(t)&&(h!==void 0||d in t)&&(t[d]=h))}if(c!=="not_valid")for(const d of e.refiner(t,o))d.explanation=r.message,c="not_refined",yield[d,void 0];c==="valid"&&(yield[void 0,t])}class oe{constructor(e){const{type:r,schema:n,validator:s,refiner:i,coercer:a=c=>c,entries:o=function*(){}}=e;this.type=r,this.schema=n,this.entries=o,this.coercer=a,s?this.validator=(c,d)=>{const h=s(c,d);return $r(h,d,this,c)}:this.validator=()=>[],i?this.refiner=(c,d)=>{const h=i(c,d);return $r(h,d,this,c)}:this.refiner=()=>[]}assert(e,r){return zt(e,this,r)}create(e,r){return dn(e,this,r)}is(e){return q(e,this)}mask(e,r){return ln(e,this,r)}validate(e,r={}){return at(e,this,r)}}function zt(t,e,r){const n=at(t,e,{message:r});if(n[0])throw n[0]}function dn(t,e,r){const n=at(t,e,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function ln(t,e,r){const n=at(t,e,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function q(t,e){return!at(t,e)[0]}function at(t,e,r={}){const n=tr(t,e,r),s=mi(n);return s[0]?[new pi(s[0],function*(){for(const a of n)a[0]&&(yield a[0])}),void 0]:[void 0,s[1]]}function Je(...t){const e=t[0].type==="type",r=t.map(s=>s.schema),n=Object.assign({},...r);return e?Si(n):p(n)}function K(t,e){return new oe({type:t,schema:null,validator:e})}function Vt(){return K("any",()=>!0)}function I(t){return new oe({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${J(e)}`}})}function bi(){return K("bigint",t=>typeof t=="bigint")}function z(){return K("boolean",t=>typeof t=="boolean")}function ae(){return K("integer",t=>typeof t=="number"&&!isNaN(t)&&Number.isInteger(t)||`Expected an integer, but received: ${J(t)}`)}function E(t){const e=J(t),r=typeof t;return new oe({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(n){return n===t||`Expected the literal \`${e}\`, but received: ${J(n)}`}})}function hn(){return K("never",()=>!1)}function M(t){return new oe({...t,validator:(e,r)=>e===null||t.validator(e,r),refiner:(e,r)=>e===null||t.refiner(e,r)})}function Ae(){return K("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${J(t)}`)}function p(t){const e=t?Object.keys(t):[],r=hn();return new oe({type:"object",schema:t||null,*entries(n){if(t&&Z(n)){const s=new Set(Object.keys(n));for(const i of e)s.delete(i),yield[i,n[i],t[i]];for(const i of s)yield[i,n[i],r]}},validator(n){return Z(n)||`Expected an object, but received: ${J(n)}`},coercer(n){return Z(n)?{...n}:n}})}function x(t){return new oe({...t,validator:(e,r)=>e===void 0||t.validator(e,r),refiner:(e,r)=>e===void 0||t.refiner(e,r)})}function ne(t,e){return new oe({type:"record",schema:null,*entries(r){if(Z(r))for(const n in r){const s=r[n];yield[n,n,t],yield[n,s,e]}},validator(r){return Z(r)||`Expected an object, but received: ${J(r)}`}})}function f(){return K("string",t=>typeof t=="string"||`Expected a string, but received: ${J(t)}`)}function fn(t){const e=hn();return new oe({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(t.length,r.length);for(let s=0;s<n;s++)yield[s,r[s],t[s]||e]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${J(r)}`}})}function Si(t){const e=Object.keys(t);return new oe({type:"type",schema:t,*entries(r){if(Z(r))for(const n of e)yield[n,r[n],t[n]]},validator(r){return Z(r)||`Expected an object, but received: ${J(r)}`},coercer(r){return Z(r)?{...r}:r}})}function P(t){const e=t.map(r=>r.type).join(" | ");return new oe({type:"union",schema:null,coercer(r){for(const n of t){const[s,i]=n.validate(r,{coerce:!0});if(!s)return i}return r},validator(r,n){const s=[];for(const i of t){const[...a]=tr(r,i,n),[o]=a;if(o[0])for(const[c]of a)c&&s.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${J(r)}`,...s]}})}function gn(){return K("unknown",()=>!0)}BigInt(1e9);const rr="0x1",pn="0x2";ie("0x6");const Ti=`${pn}::sui::SUI`;ie("0x5");const je="::",xi="0x2::sui::SUI",Ei="0.50.1",vi="1.19.0",ki={"-32700":"ParseError","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError"};class yn extends Error{}class mn extends yn{constructor(e,r){super(e),this.code=r,this.type=ki[r]??"ServerError"}}class Ii extends yn{constructor(e,r,n){super(e),this.status=r,this.statusText=n}}var nr=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},j=(t,e,r)=>(nr(t,e,"read from private field"),r?r.call(t):e.get(t)),we=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Me=(t,e,r,n)=>(nr(t,e,"write to private field"),e.set(t,r),r),_i=(t,e,r,n)=>({set _(s){Me(t,e,s)},get _(){return j(t,e,n)}}),wn=(t,e,r)=>(nr(t,e,"access private method"),r),ke,qe,he,_e,Xe,Pe,Ht,bn,sr,Sn;function Ai(t){const e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}const Bi={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class Oi{constructor(e,r={}){if(we(this,Ht),we(this,sr),we(this,ke,0),we(this,qe,0),we(this,he,null),we(this,_e,null),we(this,Xe,new Set),we(this,Pe,new Map),this.endpoint=e,this.options={...Bi,...r},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=Ai(this.endpoint))}async makeRequest(e,r){const n=await wn(this,Ht,bn).call(this);return new Promise((s,i)=>{Me(this,ke,j(this,ke)+1),j(this,Pe).set(j(this,ke),{resolve:s,reject:i,timeout:setTimeout(()=>{j(this,Pe).delete(j(this,ke)),i(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),n.send(JSON.stringify({jsonrpc:"2.0",id:j(this,ke),method:e,params:r}))}).then(({error:s,result:i})=>{if(s)throw new mn(s.message,s.code);return i})}async subscribe(e){const r=new Ci(e);return j(this,Xe).add(r),await r.subscribe(this),()=>r.unsubscribe(this)}}ke=new WeakMap;qe=new WeakMap;he=new WeakMap;_e=new WeakMap;Xe=new WeakMap;Pe=new WeakMap;Ht=new WeakSet;bn=function(){return j(this,_e)?j(this,_e):(Me(this,_e,new Promise(t=>{var e;(e=j(this,he))==null||e.close(),Me(this,he,new this.options.WebSocketConstructor(this.endpoint)),j(this,he).addEventListener("open",()=>{Me(this,qe,0),t(j(this,he))}),j(this,he).addEventListener("close",()=>{_i(this,qe)._++,j(this,qe)<=this.options.maxReconnects&&setTimeout(()=>{wn(this,sr,Sn).call(this)},this.options.reconnectTimeout)}),j(this,he).addEventListener("message",({data:r})=>{let n;try{n=JSON.parse(r)}catch(s){console.error(new Error(`Failed to parse RPC message: ${r}`,{cause:s}));return}if("id"in n&&n.id!=null&&j(this,Pe).has(n.id)){const{resolve:s,timeout:i}=j(this,Pe).get(n.id);clearTimeout(i),s(n)}else if("params"in n){const{params:s}=n;j(this,Xe).forEach(i=>{i.subscriptionId===s.subscription&&s.subscription===i.subscriptionId&&i.onMessage(s.result)})}})})),j(this,_e))};sr=new WeakSet;Sn=async function(){var t;return(t=j(this,he))==null||t.close(),Me(this,_e,null),Promise.allSettled([...j(this,Xe)].map(e=>e.subscribe(this)))};class Ci{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:r}=this;return this.subscribed=!1,r==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[r]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const r=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=r)}}var ir=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},G=(t,e,r)=>(ir(t,e,"read from private field"),r?r.call(t):e.get(t)),lt=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Ft=(t,e,r,n)=>(ir(t,e,"write to private field"),e.set(t,r),r),ji=(t,e,r)=>(ir(t,e,"access private method"),r),ze,Q,Ke,Wt,Tn;class Ui{constructor(e){lt(this,Wt),lt(this,ze,0),lt(this,Q,void 0),lt(this,Ke,void 0),Ft(this,Q,e)}fetch(e,r){const n=G(this,Q).fetch??globalThis.fetch;if(!this.fetch)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return n(e,r)}async request(e){var s,i;Ft(this,ze,G(this,ze)+1);const r=await this.fetch(((s=G(this,Q).rpc)==null?void 0:s.url)??G(this,Q).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":Ei,"Client-Target-Api-Version":vi,...(i=G(this,Q).rpc)==null?void 0:i.headers},body:JSON.stringify({jsonrpc:"2.0",id:G(this,ze),method:e.method,params:e.params})});if(!r.ok)throw new Ii(`Unexpected status code: ${r.status}`,r.status,r.statusText);const n=await r.json();if("error"in n&&n.error!=null)throw new mn(n.error.message,n.error.code);return n.result}async subscribe(e){const r=await ji(this,Wt,Tn).call(this).subscribe(e);return async()=>!!await r()}}ze=new WeakMap;Q=new WeakMap;Ke=new WeakMap;Wt=new WeakSet;Tn=function(){var t;if(!G(this,Ke)){const e=G(this,Q).WebSocketConstructor??globalThis.WebSocket;if(!e)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");Ft(this,Ke,new Oi(((t=G(this,Q).websocket)==null?void 0:t.url)??G(this,Q).url,{WebSocketConstructor:e,...G(this,Q).websocket}))}return G(this,Ke)};const Mi=/^vector<(.+)>$/,Pi=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class fe{static parseFromStr(e,r=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const n=e.match(Mi);if(n)return{vector:fe.parseFromStr(n[1],r)};const s=e.match(Pi);if(s)return{struct:{address:r?C(s[1]):s[1],module:s[2],name:s[3],typeParams:s[5]===void 0?[]:fe.parseStructTypeArgs(s[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,r=!1){return sn(e).map(n=>fe.parseFromStr(n,r))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${fe.tagToString(e.vector)}>`;if("struct"in e){const r=e.struct,n=r.typeParams.map(fe.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}}const A=new O({...li(),types:{enums:{"Option<T>":{None:null,Some:"T"}}}});function xn(t){return u.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function Ri(t){return u.enum("Option",{None:null,Some:t})}function ar(t){return t.transform({input:e=>({[e.kind]:e}),output:e=>{const r=Object.keys(e)[0];return{kind:r,...e[r]}}})}const te=u.bytes(it).transform({input:t=>typeof t=="string"?st(C(t)):t,output:t=>C(Oe(t))}),or=u.vector(u.u8()).transform({name:"ObjectDigest",input:t=>nt(t),output:t=>rt(new Uint8Array(t))}),Ye=u.struct("SuiObjectRef",{objectId:te,version:u.u64(),digest:or}),cr=u.struct("SharedObjectRef",{objectId:te,initialSharedVersion:u.u64(),mutable:u.bool()}),kt=u.enum("ObjectArg",{ImmOrOwned:Ye,Shared:cr,Receiving:Ye}),ur=u.enum("CallArg",{Pure:u.vector(u.u8()),Object:kt,ObjVec:u.vector(kt)}),Ne=u.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:u.lazy(()=>Ne),struct:u.lazy(()=>pr),u16:null,u32:null,u256:null}),X=ar(u.enum("Argument",{GasCoin:null,Input:u.struct("Input",{index:u.u16()}),Result:u.struct("Result",{index:u.u16()}),NestedResult:u.struct("NestedResult",{index:u.u16(),resultIndex:u.u16()})})),dr=u.struct("ProgrammableMoveCall",{package:te,module:u.string(),function:u.string(),type_arguments:u.vector(Ne),arguments:u.vector(X)}).transform({input:t=>{const[e,r,n]=t.target.split("::"),s=t.typeArguments.map(i=>fe.parseFromStr(i,!0));return{package:C(e),module:r,function:n,type_arguments:s,arguments:t.arguments}},output:t=>({target:[t.package,t.module,t.function].join("::"),arguments:t.arguments,typeArguments:t.type_arguments.map(fe.tagToString)})}),lr=ar(u.enum("Transaction",{MoveCall:dr,TransferObjects:u.struct("TransferObjects",{objects:u.vector(X),address:X}),SplitCoins:u.struct("SplitCoins",{coin:X,amounts:u.vector(X)}),MergeCoins:u.struct("MergeCoins",{destination:X,sources:u.vector(X)}),Publish:u.struct("Publish",{modules:u.vector(u.vector(u.u8())),dependencies:u.vector(te)}),MakeMoveVec:u.struct("MakeMoveVec",{type:Ri(Ne),objects:u.vector(X)}),Upgrade:u.struct("Upgrade",{modules:u.vector(u.vector(u.u8())),dependencies:u.vector(te),packageId:te,ticket:X})})),hr=u.struct("ProgrammableTransaction",{inputs:u.vector(ur),transactions:u.vector(lr)}),fr=u.enum("TransactionKind",{ProgrammableTransaction:hr,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),gr=u.enum("TransactionExpiration",{None:null,Epoch:xn()}),pr=u.struct("StructTag",{address:te,module:u.string(),name:u.string(),typeParams:u.vector(Ne)}),yr=u.struct("GasData",{payment:u.vector(Ye),owner:te,price:u.u64(),budget:u.u64()}),mr=u.struct("TransactionDataV1",{kind:fr,sender:te,gasData:yr,expiration:gr}),wr=u.enum("TransactionData",{V1:mr}),$i=u.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Ni=u.enum("IntentVersion",{V0:null}),Di=u.enum("AppId",{Sui:null}),Li=u.struct("Intent",{scope:$i,version:Ni,appId:Di}),zi=u.generic(["T"],t=>u.struct("IntentMessage<T>",{intent:Li,value:t})),br=u.enum("CompressedSignature",{ED25519:u.fixedArray(64,u.u8()),Secp256k1:u.fixedArray(64,u.u8()),Secp256r1:u.fixedArray(64,u.u8()),ZkLogin:u.vector(u.u8())}),Sr=u.enum("PublicKey",{ED25519:u.fixedArray(32,u.u8()),Secp256k1:u.fixedArray(33,u.u8()),Secp256r1:u.fixedArray(33,u.u8()),ZkLogin:u.vector(u.u8())}),Tr=u.struct("MultiSigPkMap",{pubKey:Sr,weight:u.u8()}),xr=u.struct("MultiSigPublicKey",{pk_map:u.vector(Tr),threshold:u.u16()}),En=u.struct("MultiSig",{sigs:u.vector(br),bitmap:u.u16(),multisig_pk:xr}),Vi=u.vector(u.u8()).transform({input:t=>typeof t=="string"?re(t):t,output:t=>W(new Uint8Array(t))}),vn=u.struct("SenderSignedTransaction",{intentMessage:zi(wr),txSignatures:u.vector(Vi)}),kn=u.vector(vn,{name:"SenderSignedData"}),U={...u,U8:u.u8(),U16:u.u16(),U32:u.u32(),U64:u.u64(),U128:u.u128(),U256:u.u256(),ULEB128:u.uleb128(),Bool:u.bool(),String:u.string(),Address:te,Argument:X,CallArg:ur,CompressedSignature:br,GasData:yr,MultiSig:En,MultiSigPkMap:Tr,MultiSigPublicKey:xr,ObjectArg:kt,ObjectDigest:or,ProgrammableMoveCall:dr,ProgrammableTransaction:hr,PublicKey:Sr,SenderSignedData:kn,SenderSignedTransaction:vn,SharedObjectRef:cr,StructTag:pr,SuiObjectRef:Ye,Transaction:lr,TransactionData:wr,TransactionDataV1:mr,TransactionExpiration:gr,TransactionKind:fr,TypeTag:Ne,ser:A.ser.bind(A),de:A.de.bind(A),getTypeInterface:A.getTypeInterface.bind(A),hasType:A.hasType.bind(A),parseTypeName:A.parseTypeName.bind(A),registerAddressType:A.registerAddressType.bind(A),registerAlias:A.registerAlias.bind(A),registerBcsType:A.registerBcsType.bind(A),registerEnumType:A.registerEnumType.bind(A),registerStructType:A.registerStructType.bind(A),registerType:A.registerType.bind(A),types:A.types};A.registerBcsType("utf8string",()=>u.string({name:"utf8string"}));A.registerBcsType("unsafe_u64",()=>xn());A.registerBcsType("enumKind",t=>ar(t));[te,X,ur,br,yr,En,Tr,xr,kt,or,dr,hr,Sr,kn,cr,pr,Ye,lr,wr,mr,gr,fr,Ne].forEach(t=>{A.registerBcsType(t.name,()=>t)});const Er=P([p({AddressOwner:f()}),p({ObjectOwner:f()}),p({Shared:p({initial_shared_version:M(f())})}),E("Immutable")]);K("SuiJsonValue",()=>!0);const Hi=P([p({u32:f()}),p({u64:f()}),p({f64:f()})]);p({attributes:ne(f(),M(Hi)),featureFlags:ne(f(),z()),maxSupportedProtocolVersion:f(),minSupportedProtocolVersion:f(),protocolVersion:f()});P([f(),E("package")]);const Se=p({digest:f(),objectId:f(),version:P([Ae(),f(),bi()])});p({owner:Er,reference:Se});p({objectId:f(),sequenceNumber:f()});p({payment:I(Se),owner:f(),price:f(),budget:f()});const Fi=Je(Se,p({type:f(),owner:Er,previousTransaction:f()})),Wi=ne(f(),Vt()),qi=ne(f(),gn()),Ki=p({type:f(),fields:Wi,hasPublicTransfer:z()}),Gi=p({disassembled:qi}),Zi=P([Je(Ki,p({dataType:E("moveObject")})),Je(Gi,p({dataType:E("package")}))]),Ji=p({type:f(),hasPublicTransfer:z(),version:f(),bcsBytes:f()}),Xi=p({id:f(),moduleMap:ne(f(),f())}),Yi=P([Je(Ji,p({dataType:E("moveObject")})),Je(Xi,p({dataType:E("package")}))]);BigInt(1e9);const In=p({code:f(),error:x(f()),object_id:x(f()),parent_object_id:x(f()),version:x(f()),digest:x(f())}),Qi=p({data:M(x(ne(f(),f()))),error:M(x(In))}),ea=P([Qi,x(ne(f(),f()))]),_n=p({objectId:f(),version:f(),digest:f(),type:M(x(f())),content:M(x(Zi)),bcs:M(x(Yi)),owner:M(x(Er)),previousTransaction:M(x(f())),storageRebate:M(x(f())),display:M(x(ea))});p({showType:M(x(z())),showContent:M(x(z())),showBcs:M(x(z())),showOwner:M(x(z())),showPreviousTransaction:M(x(z())),showStorageRebate:M(x(z())),showDisplay:M(x(z()))});P([E("Exists"),E("notExists"),E("Deleted")]);I(Fi);const ta=p({data:M(x(_n)),error:M(x(In))});function ra(t){return t.data}function na(t){if(t.error&&"object_id"in t.error&&"version"in t.error&&"digest"in t.error){const e=t.error;return{objectId:e.object_id,version:e.version,digest:e.digest}}}function Nr(t){if("reference"in t)return t.reference;const e=ra(t);return e?{objectId:e.objectId,version:e.version,digest:e.digest}:na(t)}p({objectId:f(),atCheckpoint:x(Ae())});p({data:I(ta),nextCursor:x(M(f())),hasNextPage:z()});P([p({details:_n,status:E("VersionFound")}),p({details:f(),status:E("ObjectNotExists")}),p({details:Se,status:E("ObjectDeleted")}),p({details:fn([f(),Ae()]),status:E("VersionNotFound")}),p({details:p({asked_version:Ae(),latest_version:Ae(),object_id:f()}),status:E("VersionTooHigh")})]);const sa=P([f(),p({Object:f()})]);I(sa);const ia=p({address:f(),name:f()}),aa=P([E("Private"),E("Public"),E("Friend")]),vr=p({abilities:I(f())}),oa=p({constraints:vr,isPhantom:z()}),ca=p({TypeParameter:Ae()}),$t=fn([p({module:f(),package:f(),function:f()}),f()]);p({rank3Days:I($t),rank7Days:I($t),rank30Days:I($t)});function An(t){if(!t)return!1;if(typeof t=="string"||q(t,ca)||Bn(t))return!0;if(typeof t!="object")return!1;const e=t;return!!(q(e.Reference,Re)||q(e.MutableReference,Re)||q(e.Vector,Re))}const Re=K("SuiMoveNormalizedType",An);function Bn(t){if(!t||typeof t!="object")return!1;const e=t;if(!e.Struct||typeof e.Struct!="object")return!1;const r=e.Struct;return!(typeof r.address!="string"||typeof r.module!="string"||typeof r.name!="string"||!Array.isArray(r.typeArguments)||!r.typeArguments.every(n=>An(n)))}K("SuiMoveNormalizedStructType",Bn);const ua=p({visibility:aa,isEntry:z(),typeParameters:I(vr),parameters:I(Re),return:I(Re)}),da=p({name:f(),type:Re}),la=p({abilities:vr,typeParameters:I(oa),fields:I(da)}),ha=p({fileFormatVersion:Ae(),address:f(),name:f(),friends:I(ia),structs:ne(f(),la),exposedFunctions:ne(f(),ua)});ne(f(),ha);function qt(t){return typeof t=="object"&&"MutableReference"in t?t.MutableReference:void 0}function On(t){return typeof t=="object"&&"Reference"in t?t.Reference:void 0}function kr(t){if(typeof t=="object"&&"Struct"in t)return t;const e=On(t),r=qt(t);if(typeof e=="object"&&"Struct"in e)return e;if(typeof r=="object"&&"Struct"in r)return r}const fa=P([p({ImmOrOwned:Se}),p({Shared:p({objectId:f(),initialSharedVersion:P([ae(),f()]),mutable:z()})}),p({Receiving:Se})]),It=p({Pure:I(ae())}),Kt=p({Object:fa}),_t=P([It,Kt]);function ga(t,e){return{Pure:Array.from(t instanceof Uint8Array?t:er(t)?t.toBytes():U.ser(e,t,{maxSize:1/0}).toBytes())}}const F={Pure:ga,ObjectRef({objectId:t,digest:e,version:r}){return{Object:{ImmOrOwned:{digest:e,version:r,objectId:C(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:r}){return{Object:{Shared:{mutable:e,initialSharedVersion:r,objectId:C(t)}}}},ReceivingRef({objectId:t,digest:e,version:r}){return{Object:{Receiving:{digest:e,version:r,objectId:C(t)}}}}};function Dr(t){return typeof t=="string"?C(t):"ImmOrOwned"in t.Object?C(t.Object.ImmOrOwned.objectId):"Receiving"in t.Object?C(t.Object.Receiving.objectId):C(t.Object.Shared.objectId)}function pa(t){return typeof t=="object"&&"Object"in t&&"Shared"in t.Object?t.Object.Shared:void 0}function ya(t){var e;return((e=pa(t))==null?void 0:e.mutable)??!1}function ma(t){function e(r,n){return t(r,n)}return e.u8=r=>t(U.U8.serialize(r)),e.u16=r=>t(U.U16.serialize(r)),e.u32=r=>t(U.U32.serialize(r)),e.u64=r=>t(U.U64.serialize(r)),e.u128=r=>t(U.U128.serialize(r)),e.u256=r=>t(U.U256.serialize(r)),e.bool=r=>t(U.Bool.serialize(r)),e.string=r=>t(U.String.serialize(r)),e.address=r=>t(U.Address.serialize(r)),e.id=e.address,e}const wa="object",ba="ID",Sa="ascii",Ta="String",xa="string",Ea="String",va="option",ka="Option",Ia={address:pn,module:wa,name:ba},_a={address:rr,module:Sa,name:Ta},Aa={address:rr,module:xa,name:Ea},Ba={address:rr,module:va,name:ka},ht=(t,e)=>t.address===e.address&&t.module===e.module&&t.name===e.name;function Oa(t){var r;const e=(r=kr(t))==null?void 0:r.Struct;return(e==null?void 0:e.address)==="0x2"&&(e==null?void 0:e.module)==="tx_context"&&(e==null?void 0:e.name)==="TxContext"}function Nt(t,e){if(!(typeof e>"u")&&typeof e!==t)throw new Error(`Expect ${e} to be ${t}, received ${typeof e}`)}const Ca=["Address","Bool","U8","U16","U32","U64","U128","U256"];function Gt(t,e){if(typeof t=="string"&&Ca.includes(t)){if(t in["U8","U16","U32","U64","U128","U256"])Nt("number",e);else if(t==="Bool")Nt("boolean",e);else if(t==="Address"&&(Nt("string",e),e&&!le(e)))throw new Error("Invalid Sui Address");return t.toLowerCase()}else if(typeof t=="string")throw new Error(`Unknown pure normalized type ${JSON.stringify(t,null,2)}`);if("Vector"in t){if((e===void 0||typeof e=="string")&&t.Vector==="U8")return"string";if(e!==void 0&&!Array.isArray(e))throw new Error(`Expect ${e} to be a array, received ${typeof e}`);const r=Gt(t.Vector,e?e[0]:void 0);return r===void 0?void 0:`vector<${r}>`}if("Struct"in t){if(ht(t.Struct,_a))return"string";if(ht(t.Struct,Aa))return"utf8string";if(ht(t.Struct,Ia))return"address";if(ht(t.Struct,Ba)){const r={Vector:t.Struct.typeArguments[0]};return Gt(r,e)}}}function ja(t,e){const r=Array.from(`${t}::`).map(s=>s.charCodeAt(0)),n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),Ge(n,{dkLen:32})}function H(t,e){return dn(t,e)}const Ua=t=>P([p({None:P([E(!0),E(null)])}),p({Some:t})]),Qe=P([p({kind:E("Input"),index:ae(),value:x(Vt()),type:x(E("object"))}),p({kind:E("Input"),index:ae(),value:x(Vt()),type:E("pure")})]),Ma=[Qe,p({kind:E("GasCoin")}),p({kind:E("Result"),index:ae()}),p({kind:E("NestedResult"),index:ae(),resultIndex:ae()})],pe=P([...Ma]),Cn=p({kind:E("MoveCall"),target:K("target",f().validator),typeArguments:I(f()),arguments:I(pe)}),jn=p({kind:E("TransferObjects"),objects:I(pe),address:pe}),Un=p({kind:E("SplitCoins"),coin:pe,amounts:I(pe)}),Mn=p({kind:E("MergeCoins"),destination:pe,sources:I(pe)}),Pn=p({kind:E("MakeMoveVec"),type:x(Ua(ne(f(),gn()))),objects:I(pe)}),Rn=p({kind:E("Publish"),modules:I(I(ae())),dependencies:I(f())}),$n=p({kind:E("Upgrade"),modules:I(I(ae())),dependencies:I(f()),packageId:f(),ticket:pe}),Pa=[Cn,jn,Un,Mn,Rn,$n,Pn],Ra=P([...Pa]),Ee={MoveCall(t){return H({kind:"MoveCall",target:t.target,arguments:t.arguments??[],typeArguments:t.typeArguments??[]},Cn)},TransferObjects(t,e){return e.kind==="Input"&&e.type==="pure"&&typeof e.value!="object"&&(e.value=F.Pure(U.Address.serialize(e.value))),H({kind:"TransferObjects",objects:t,address:e},jn)},SplitCoins(t,e){return e.forEach(r=>{r.kind==="Input"&&r.type==="pure"&&typeof r.value!="object"&&(r.value=F.Pure(U.U64.serialize(r.value)))}),H({kind:"SplitCoins",coin:t,amounts:e},Un)},MergeCoins(t,e){return H({kind:"MergeCoins",destination:t,sources:e},Mn)},Publish({modules:t,dependencies:e}){return H({kind:"Publish",modules:t.map(r=>typeof r=="string"?Array.from(re(r)):r),dependencies:e.map(r=>ie(r))},Rn)},Upgrade({modules:t,dependencies:e,packageId:r,ticket:n}){return H({kind:"Upgrade",modules:t.map(s=>typeof s=="string"?Array.from(re(s)):s),dependencies:e.map(s=>ie(s)),packageId:r,ticket:n},$n)},MakeMoveVec({type:t,objects:e}){return H({kind:"MakeMoveVec",type:t?{Some:fe.parseFromStr(t)}:{None:null},objects:e},Pn)}},$a=x(M(P([p({Epoch:ae()}),p({None:P([E(!0),E(null)])})]))),Lr=K("StringEncodedBigint",t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}}),Na=p({budget:x(Lr),price:x(Lr),payment:x(I(Se)),owner:x(f())}),ft=p({version:E(1),sender:x(f()),expiration:$a,gasConfig:Na,inputs:I(Qe),transactions:I(Ra)});function zr(t){return C(t).replace("0x","")}class ge{constructor(e){this.version=1,this.sender=e==null?void 0:e.sender,this.expiration=e==null?void 0:e.expiration,this.gasConfig=(e==null?void 0:e.gasConfig)??{},this.inputs=(e==null?void 0:e.inputs)??[],this.transactions=(e==null?void 0:e.transactions)??[]}static fromKindBytes(e){const r=U.TransactionKind.parse(e),n="ProgrammableTransaction"in r?r.ProgrammableTransaction:null;if(!n)throw new Error("Unable to deserialize from bytes.");const s=H({version:1,gasConfig:{},inputs:n.inputs.map((i,a)=>H({kind:"Input",value:i,index:a,type:q(i,It)?"pure":"object"},Qe)),transactions:n.transactions},ft);return ge.restore(s)}static fromBytes(e){var a;const r=U.TransactionData.parse(e),n=r==null?void 0:r.V1,s="ProgrammableTransaction"in n.kind?(a=n==null?void 0:n.kind)==null?void 0:a.ProgrammableTransaction:null;if(!n||!s)throw new Error("Unable to deserialize from bytes.");const i=H({version:1,sender:n.sender,expiration:n.expiration,gasConfig:n.gasData,inputs:s.inputs.map((o,c)=>H({kind:"Input",value:o,index:c,type:q(o,It)?"pure":"object"},Qe)),transactions:s.transactions},ft);return ge.restore(i)}static restore(e){zt(e,ft);const r=new ge;return Object.assign(r,e),r}static getDigestFromBytes(e){const r=ja("TransactionData",e);return rt(r)}build({maxSizeBytes:e=1/0,overrides:r,onlyTransactionKind:n}={}){const s=this.inputs.map(h=>(zt(h.value,_t),h.value)),i={ProgrammableTransaction:{inputs:s,transactions:this.transactions}};if(n)return U.TransactionKind.serialize(i,{maxSize:e}).toBytes();const a=(r==null?void 0:r.expiration)??this.expiration,o=(r==null?void 0:r.sender)??this.sender,c={...this.gasConfig,...r==null?void 0:r.gasConfig};if(!o)throw new Error("Missing transaction sender");if(!c.budget)throw new Error("Missing gas budget");if(!c.payment)throw new Error("Missing gas payment");if(!c.price)throw new Error("Missing gas price");const d={sender:zr(o),expiration:a||{None:!0},gasData:{payment:c.payment,owner:zr(this.gasConfig.owner??o),price:BigInt(c.price),budget:BigInt(c.budget)},kind:{ProgrammableTransaction:{inputs:s,transactions:this.transactions}}};return U.TransactionData.serialize({V1:d},{maxSize:e}).toBytes()}getDigest(){const e=this.build({onlyTransactionKind:!1});return ge.getDigestFromBytes(e)}snapshot(){return H(this,ft)}}var Ir=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},_=(t,e,r)=>(Ir(t,e,"read from private field"),r?r.call(t):e.get(t)),ue=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},gt=(t,e,r,n)=>(Ir(t,e,"write to private field"),e.set(t,r),r),$=(t,e,r)=>(Ir(t,e,"access private method"),r),v,Ve,mt,He,wt,Te,Be,_r,Nn,Ar,Dn,Br,Ln,Or,zn,bt,Zt;const Da={maxPureArgumentSize:16*1024,maxTxGas:5e10,maxGasObjects:256,maxTxSizeBytes:128*1024};function La(t){const e={kind:"Result",index:t},r=[],n=s=>r[s]??(r[s]={kind:"NestedResult",index:t,resultIndex:s});return new Proxy(e,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(s,i){if(i in s)return Reflect.get(s,i);if(i===Symbol.iterator)return function*(){let o=0;for(;;)yield n(o),o++};if(typeof i=="symbol")return;const a=parseInt(i,10);if(!(Number.isNaN(a)||a<0))return n(a)}})}function za(t){const e=kr(t);return e?e.Struct.address==="0x2"&&e.Struct.module==="transfer"&&e.Struct.name==="Receiving":!1}function et(t){if(!t.client)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}const Vn=Symbol.for("@mysten/transaction"),Dt={maxTxGas:"max_tx_gas",maxGasObjects:"max_gas_payment_objects",maxTxSizeBytes:"max_tx_size_bytes",maxPureArgumentSize:"max_pure_argument_size"},Va=1000n,Ha=50,Fa=(t,e)=>Array.from({length:Math.ceil(t.length/e)},(r,n)=>t.slice(n*e,n*e+e));function Wa(t){return!!t&&typeof t=="object"&&t[Vn]===!0}const Jt=class{constructor(t){ue(this,Ve),ue(this,He),ue(this,Te),ue(this,_r),ue(this,Ar),ue(this,Br),ue(this,Or),ue(this,bt),ue(this,v,void 0),gt(this,v,new ge(t?t.blockData:void 0))}static fromKind(t){const e=new Jt;return gt(e,v,ge.fromKindBytes(typeof t=="string"?re(t):t)),e}static from(t){const e=new Jt;return typeof t!="string"||!t.startsWith("{")?gt(e,v,ge.fromBytes(typeof t=="string"?re(t):t)):gt(e,v,ge.restore(JSON.parse(t))),e}setSender(t){_(this,v).sender=t}setSenderIfNotSet(t){_(this,v).sender||(_(this,v).sender=t)}setExpiration(t){_(this,v).expiration=t}setGasPrice(t){_(this,v).gasConfig.price=String(t)}setGasBudget(t){_(this,v).gasConfig.budget=String(t)}setGasOwner(t){_(this,v).gasConfig.owner=t}setGasPayment(t){_(this,v).gasConfig.payment=t.map(e=>ln(e,Se))}get blockData(){return _(this,v).snapshot()}get[Vn](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:ma((t,e)=>er(t)?$(this,Ve,mt).call(this,"pure",{Pure:Array.from(t.toBytes())}):$(this,Ve,mt).call(this,"pure",t instanceof Uint8Array?F.Pure(t):e?F.Pure(t,e):t))}),this.pure}get gas(){return{kind:"GasCoin"}}object(t){if(typeof t=="object"&&"kind"in t)return t;const e=Dr(t),r=_(this,v).inputs.find(n=>n.type==="object"&&e===Dr(n.value));return r&&q(r.value,Kt)&&"Shared"in r.value.Object&&q(t,Kt)&&"Shared"in t.Object&&(r.value.Object.Shared.mutable=r.value.Object.Shared.mutable||t.Object.Shared.mutable),r??$(this,Ve,mt).call(this,"object",typeof t=="string"?C(t):t)}objectRef(...t){return this.object(F.ObjectRef(...t))}receivingRef(...t){return this.object(F.ReceivingRef(...t))}sharedObjectRef(...t){return this.object(F.SharedObjectRef(...t))}add(t){const e=_(this,v).transactions.push(t);return La(e-1)}splitCoins(t,e){return this.add(Ee.SplitCoins(typeof t=="string"?this.object(t):t,e.map(r=>typeof r=="number"||typeof r=="bigint"||typeof r=="string"?this.pure.u64(r):$(this,He,wt).call(this,r))))}mergeCoins(t,e){return this.add(Ee.MergeCoins(typeof t=="string"?this.object(t):t,e.map(r=>typeof r=="string"?this.object(r):r)))}publish({modules:t,dependencies:e}){return this.add(Ee.Publish({modules:t,dependencies:e}))}upgrade({modules:t,dependencies:e,packageId:r,ticket:n}){return this.add(Ee.Upgrade({modules:t,dependencies:e,packageId:r,ticket:typeof n=="string"?this.object(n):n}))}moveCall({arguments:t,typeArguments:e,target:r}){return this.add(Ee.MoveCall({arguments:t==null?void 0:t.map(n=>$(this,He,wt).call(this,n)),typeArguments:e,target:r}))}transferObjects(t,e){return this.add(Ee.TransferObjects(t.map(r=>typeof r=="string"?this.object(r):r),typeof e=="string"?this.pure.address(e):$(this,He,wt).call(this,e)))}makeMoveVec({type:t,objects:e}){return this.add(Ee.MakeMoveVec({type:t,objects:e.map(r=>typeof r=="string"?this.object(r):r)}))}serialize(){return JSON.stringify(_(this,v).snapshot())}async sign(t){const{signer:e,...r}=t,n=await this.build(r);return e.signTransactionBlock(n)}async build(t={}){return await $(this,bt,Zt).call(this,t),_(this,v).build({maxSizeBytes:$(this,Te,Be).call(this,"maxTxSizeBytes",t),onlyTransactionKind:t.onlyTransactionKind})}async getDigest(t={}){return await $(this,bt,Zt).call(this,t),_(this,v).getDigest()}};let qa=Jt;v=new WeakMap;Ve=new WeakSet;mt=function(t,e){const r=_(this,v).inputs.length,n=H({kind:"Input",value:typeof e=="bigint"?String(e):e,index:r,type:t},Qe);return _(this,v).inputs.push(n),n};He=new WeakSet;wt=function(t){return er(t)?this.pure(t):t};Te=new WeakSet;Be=function(t,{protocolConfig:e,limits:r}){if(r&&typeof r[t]=="number")return r[t];if(!e)return Da[t];const n=e==null?void 0:e.attributes[Dt[t]];if(!n)throw new Error(`Missing expected protocol config: "${Dt[t]}"`);const s="u64"in n?n.u64:"u32"in n?n.u32:n.f64;if(!s)throw new Error(`Unexpected protocol config value found for: "${Dt[t]}"`);return Number(s)};_r=new WeakSet;Nn=function(t){const e=$(this,Te,Be).call(this,"maxPureArgumentSize",t);_(this,v).inputs.forEach((r,n)=>{if(q(r.value,It)&&r.value.Pure.length>e)throw new Error(`Input at index ${n} is too large, max pure input size is ${e} bytes, got ${r.value.Pure.length} bytes`)})};Ar=new WeakSet;Dn=async function(t){if(_(this,v).gasConfig.payment){const s=$(this,Te,Be).call(this,"maxGasObjects",t);if(_(this,v).gasConfig.payment.length>s)throw new Error(`Payment objects exceed maximum amount: ${s}`)}if(t.onlyTransactionKind||_(this,v).gasConfig.payment)return;const e=_(this,v).gasConfig.owner??_(this,v).sender,n=(await et(t).getCoins({owner:e,coinType:Ti})).data.filter(s=>!_(this,v).inputs.find(a=>q(a.value,_t)&&"Object"in a.value&&"ImmOrOwned"in a.value.Object?s.coinObjectId===a.value.Object.ImmOrOwned.objectId:!1)).slice(0,$(this,Te,Be).call(this,"maxGasObjects",t)-1).map(s=>({objectId:s.coinObjectId,digest:s.digest,version:s.version}));if(!n.length)throw new Error("No valid gas coins found for the transaction.");this.setGasPayment(n)};Br=new WeakSet;Ln=async function(t){t.onlyTransactionKind||_(this,v).gasConfig.price||this.setGasPrice(await et(t).getReferenceGasPrice())};Or=new WeakSet;zn=async function(t){const{inputs:e,transactions:r}=_(this,v),n=[],s=[];if(e.forEach(i=>{if(i.type==="object"&&typeof i.value=="string"){s.push({id:C(i.value),input:i});return}}),r.forEach(i=>{if(i.kind==="MoveCall"&&i.arguments.some(o=>o.kind==="Input"&&!q(e[o.index].value,_t))&&n.push(i),i.kind==="SplitCoins"&&i.amounts.forEach(a=>{if(a.kind==="Input"){const o=e[a.index];typeof o.value!="object"&&(o.value=F.Pure(U.U64.serialize(o.value)))}}),i.kind==="TransferObjects"&&i.address.kind==="Input"){const a=e[i.address.index];typeof a.value!="object"&&(a.value=F.Pure(U.Address.serialize(a.value)))}}),n.length&&await Promise.all(n.map(async i=>{const[a,o,c]=i.target.split("::"),d=await et(t).getNormalizedMoveFunction({package:ie(a),module:o,function:c}),l=d.parameters.length>0&&Oa(d.parameters.at(-1))?d.parameters.slice(0,d.parameters.length-1):d.parameters;if(l.length!==i.arguments.length)throw new Error("Incorrect number of arguments.");l.forEach((g,y)=>{const m=i.arguments[y];if(m.kind!=="Input")return;const w=e[m.index];if(q(w.value,_t))return;const b=w.value,k=Gt(g,b);if(k){w.value=F.Pure(b,k);return}if(kr(g)!=null||typeof g=="object"&&"TypeParameter"in g){if(typeof b!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(b,null,2)}`);s.push({id:b,input:w,normalizedType:g});return}throw new Error(`Unknown call arg type ${JSON.stringify(g,null,2)} for value ${JSON.stringify(b,null,2)}`)})})),s.length){const i=[...new Set(s.map(({id:h})=>h))],a=Fa(i,Ha),o=(await Promise.all(a.map(h=>et(t).multiGetObjects({ids:h,options:{showOwner:!0}})))).flat();let c=new Map(i.map((h,l)=>[h,o[l]]));const d=Array.from(c).filter(([h,l])=>l.error).map(([h,l])=>h);if(d.length)throw new Error(`The following input objects are invalid: ${d.join(", ")}`);s.forEach(({id:h,input:l,normalizedType:g})=>{var b;const y=c.get(h),m=(b=y.data)==null?void 0:b.owner,w=m&&typeof m=="object"&&"Shared"in m?m.Shared.initial_shared_version:void 0;if(w){const k=g!=null&&qt(g)==null&&On(g)==null,B=ya(l.value)||k||g!=null&&qt(g)!=null;l.value=F.SharedObjectRef({objectId:h,initialSharedVersion:w,mutable:B})}else g&&za(g)?l.value=F.ReceivingRef(Nr(y)):l.value=F.ObjectRef(Nr(y))})}};bt=new WeakSet;Zt=async function(t){if(!t.onlyTransactionKind&&!_(this,v).sender)throw new Error("Missing transaction sender");if(!t.protocolConfig&&!t.limits&&t.client&&(t.protocolConfig=await t.client.getProtocolConfig()),await Promise.all([$(this,Br,Ln).call(this,t),$(this,Or,zn).call(this,t)]),!t.onlyTransactionKind&&(await $(this,Ar,Dn).call(this,t),!_(this,v).gasConfig.budget)){const e=await et(t).dryRunTransactionBlock({transactionBlock:_(this,v).build({maxSizeBytes:$(this,Te,Be).call(this,"maxTxSizeBytes",t),overrides:{gasConfig:{budget:String($(this,Te,Be).call(this,"maxTxGas",t)),payment:[]}}})});if(e.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${e.effects.status.error}`,{cause:e});const r=Va*BigInt(this.blockData.gasConfig.price||1n),n=BigInt(e.effects.gasUsed.computationCost)+r,s=n+BigInt(e.effects.gasUsed.storageCost)-BigInt(e.effects.gasUsed.storageRebate);this.setGasBudget(s>n?s:n)}$(this,_r,Nn).call(this,t)};const Ka=Symbol.for("@mysten/SuiClient");class Ga{get[Ka](){return!0}constructor(e){this.transport=e.transport??new Ui({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!le(C(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!le(C(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!le(C(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!le(C(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,r){return await this.transport.request({method:e,params:r})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!le(C(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!dt(ie(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach(n=>{if(!n||!dt(ie(n)))throw new Error(`Invalid Sui Object id ${n}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"]})}async getTransactionBlock(e){if(!Rr(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach(n=>{if(!Rr(n))throw new Error(`Invalid Transaction digest ${n}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock(e){return await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:W(e.transactionBlock),Array.isArray(e.signature)?e.signature:[e.signature],e.options,e.requestType]})}async signAndExecuteTransactionBlock({transactionBlock:e,signer:r,...n}){let s;e instanceof Uint8Array?s=e:(e.setSenderIfNotSet(r.toSuiAddress()),s=await e.build({client:this}));const{signature:i,bytes:a}=await r.signTransactionBlock(s);return this.executeTransactionBlock({transactionBlock:a,signature:i,...n})}async getTotalTransactionBlocks(){const e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){const e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!le(C(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach(r=>{if(!r||!dt(ie(r)))throw new Error(`Invalid Sui Stake id ${r}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){var n;let r;if(Wa(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),r=W(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")r=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)r=W(e.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,r,(n=e.gasPrice)==null?void 0:n.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:W(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!dt(ie(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){const e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e==null?void 0:e.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e==null?void 0:e.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e==null?void 0:e.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const e=await this.getCheckpoint({id:"0"}),r=nt(e.digest);return Oe(r.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames(e){return await this.transport.request({method:"suix_resolveNameServiceNames",params:[e.address,e.cursor,e.limit]})}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e==null?void 0:e.version]})}async waitForTransactionBlock({signal:e,timeout:r=60*1e3,pollInterval:n=2*1e3,...s}){const i=AbortSignal.timeout(r),a=new Promise((o,c)=>{i.addEventListener("abort",()=>c(i.reason))});for(a.catch(()=>{});!i.aborted;){e==null||e.throwIfAborted();try{return await this.getTransactionBlock(s)}catch{await Promise.race([new Promise(c=>setTimeout(c,n)),a])}}throw i.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}class Hn extends ds{}const At="Sui",Fn=t=>{var r;const e=(r=t.data)==null?void 0:r.content;return e&&e.dataType==="moveObject"?e.fields:null},$o=(t,e)=>{try{return Hr(t)===Hr(e)}catch{return!1}},No=t=>(t==null?void 0:t.type)==="created",Do=t=>(t==null?void 0:t.type)==="published";function Za(t){return Array.isArray(t)}function Cr(t){return!Array.isArray(t)&&typeof t=="object"&&"fields"in t&&"type"in t}function Ja(t){return typeof t=="object"&&!Za(t)&&!Cr(t)}const Xa=16*1024,Lo=t=>U.ser("vector<u8>",t,{maxSize:Xa}).toBytes(),zo=async(t,e)=>{const{data:r,error:n}=await t.getObject({id:e,options:{showContent:!0}});if(n)throw new Error("Error getting object: "+n);if(!r||!Cr(r.content))throw new Error(`Cannot get oject for state id ${e}: `+r);return eo(r.content.type)},Ya=async(t,e)=>{if(!le(e))throw new Error(`Invalid object ID: ${e}`);const r=await t.getObject({id:e,options:{showContent:!0}});return Fn(r)};async function Vo(t,e){let r,n;do{const a=await t.getDynamicFields({parentId:e,cursor:n});r=a.data.find(o=>o.name.type.endsWith("CurrentPackage")),n=a.hasNextPage?a.nextCursor:null}while(n&&!r);if(!r)throw new Error("CurrentPackage not found");const s=await t.getObject({id:r.objectId,options:{showContent:!0}}),i=Fn(s);if(!i||!Ja(i))throw new Error("Unable to get fields from object response");if(!("value"in i)||!Cr(i.value))throw new Error("Unable to get package id");return i.value.fields.package}const Ho=async(t,e,r)=>{let n=null,s=null,i=null,a;do{if(i=await t.getOwnedObjects({owner:r,filter:{StructType:`${e}::emitter::EmitterCap`},options:{showContent:!0},cursor:a}),!i||!i.data)throw Error("Failed to get owned objects");for(const o of i.data){if(!o.data)continue;const{version:c,objectId:d}=o.data;(n===null||c<n)&&(n=c,s=d)}a=i.hasNextPage?i.nextCursor:void 0}while(a);return s},Fo=async(t,e)=>{const r=new qa,[n]=r.publish({modules:t.modules.map(s=>Array.from(es.decode(s))),dependencies:t.dependencies.map(s=>ie(s))});return r.transferObjects([n],r.pure(e)),r},de=class de extends ls{constructor(e,r){super(e,r??ts(e,de._platform))}getRpc(e){if(e in this.config)return new Ga({url:this.config[e].rpc});throw new Error("No configuration available for chain: "+e)}getChain(e){if(e in this.config)return new Hn(e,this);throw new Error("No configuration available for chain: "+e)}static nativeTokenId(e,r){if(!de.isSupportedChain(r))throw new Error(`invalid chain for ${At}: ${r}`);return rs.tokenId(r,xi)}static isNativeTokenId(e,r,n){return!de.isSupportedChain(r)||n.chain!==r?!1:this.nativeTokenId(e,r)===n}static isSupportedChain(e){return ns(e)===de._platform}static async getDecimals(e,r,n){if(jt(n))return ss(de._platform);const s=new xe(n);try{const a=await Ya(r,s.toString());if(a&&"decimals"in a)return a.decimals}catch{}const i=await r.getCoinMetadata({coinType:s.getCoinType()});if(i===null)throw new Error(`Can't fetch decimals for token ${s.toString()}`);return i.decimals}static async getBalance(e,r,n,s){if(jt(s)){const{totalBalance:a}=await r.getBalance({owner:n});return BigInt(a)}const{totalBalance:i}=await r.getBalance({owner:n,coinType:s.toString()});return BigInt(i)}static async getBalances(e,r,n,s){return(await Promise.all(s.map(async a=>{const o=await this.getBalance(e,r,n,a);return{[jt(a)?"native":new xe(a).toString()]:o}}))).reduce((a,o)=>Object.assign(a,o),{})}static async sendWait(e,r,n){const s=[];for(const i of n){const a=await r.executeTransactionBlock(i);await r.waitForTransactionBlock({digest:a.digest}),s.push(a.digest)}return s}static async getLatestBlock(e){return Number(await e.getLatestCheckpointSequenceNumber())}static async getLatestFinalizedBlock(e){return this.getLatestBlock(e)}static chainFromChainId(e){const r=is(de._platform,e);if(r===void 0)throw new Error(`Unknown native chain id ${e}`);const[n,s]=r;return[n,s]}static async chainFromRpc(e){const r=await e.call("sui_getChainIdentifier",[]);return this.chainFromChainId(r)}};se(de,"_platform",At);let $e=de;const Wn=t=>/^(0x)?[0-9a-fA-F]+::\w+::\w+$/.test(t),Qa=t=>t.replace(/(0x)(0*)/g,"0x");function Vr(t){return t=t.startsWith("0x")?t.slice(2):t,t=t.length%2===0?t:"0"+t,`0x${t.length===64?t:Fe.encode(os.zpad(Fe.decode(t),32))}`}const Hr=t=>{const e=t.split(je);if(e.length!==3)throw new Error(`Invalid Sui type: ${t}`);return[C(e[0]),e[1],e[2]].join(je)},Wo=t=>new xe(t).getCoinType(),eo=t=>new xe(t).getPackageId(),qo=t=>{const e=Qa(t).match(/0x2::table::Table<(.*)>/);if(!e)throw new Error(`Invalid table type: ${t}`);if(e.length<2)throw new Error(`Invalid table type: ${t}`);const[r]=e[1].split(",");if(!r||!Wn(r))throw new Error(`Invalid key type: ${r}`);return r},Ie=class Ie{constructor(e){se(this,"address");se(this,"module");if(Ie.instanceof(e))this.address=e.address,this.module=e.module;else if(Ur.instanceof(e))this.address=e.toUint8Array();else if(typeof e=="string"){if(Wn(e)){const r=e.split(je);this.module=r.slice(1).join(je),e=r[0]}if(e=Vr(e),!Fe.valid(e))throw new Error("Invalid Sui address: "+e);this.address=Fe.decode(e)}else this.address=e}unwrap(){const e=this.getPackageId(),r=this.module?je+this.module:"";return`${e}${r}`}toString(){return this.unwrap()}toNative(){return this}toUint8Array(){return this.address}toUniversalAddress(){return new Ur(this.toUint8Array())}getPackageId(){return Vr(Fe.encode(this.address))}getCoinType(){return[this.getPackageId(),"coin","COIN"].join(je)}static instanceof(e){return e.constructor.platform===Ie.platform}equals(e){return Ie.instanceof(e)?e.unwrap()===this.unwrap():this.toUniversalAddress().equals(e)}};se(Ie,"byteSize",32),se(Ie,"platform",$e._platform);let xe=Ie;as(At,xe);var tt=(t=>(t[t.TransactionData=0]="TransactionData",t[t.TransactionEffects=1]="TransactionEffects",t[t.CheckpointSummary=2]="CheckpointSummary",t[t.PersonalMessage=3]="PersonalMessage",t))(tt||{});function to(t){return[t,0,0]}function qn(t,e){const r=to(t),n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),n}const Bt={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},ro={ED25519:32,Secp256k1:33,Secp256r1:33},no={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"};function so(t){for(let e=0;e<t.length;e++)if(t[e]!==0)return e;return-1}function io(t,e){const r=t.toString(16);return cs(r.padStart(e*2,"0").slice(-e*2))}function ao(t,e){const r=io(t,e),n=so(r);return n===-1?new Uint8Array([0]):r.slice(n)}function oo(t,e){const r=ao(t,32);e==="accounts.google.com"&&(e="https://accounts.google.com");const n=new TextEncoder().encode(e),s=new Uint8Array(2+r.length+n.length);return s.set([Bt.ZkLogin]),s.set([n.length],1),s.set(n,2),s.set(r,2+n.length),C(Kr(Ge(s,{dkLen:32})).slice(0,it*2))}function co(t){if(t.length!==1)throw new Error("Invalid base64Url character: "+t);const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(t);if(r===-1)throw new Error("Invalid base64Url character: "+t);const n=r.toString(2).padStart(6,"0");return Array.from(n).map(Number)}function uo(t){let e=[];for(let r=0;r<t.length;r++){const n=t.charAt(r),s=co(n);e=e.concat(s)}return e}function lo(t,e){if(t.length<2)throw new Error(`Input (s = ${t}) is not tightly packed because s.length < 2`);let r=uo(t);const n=e%4;if(n!==0)if(n===1)r=r.slice(2);else if(n===2)r=r.slice(4);else throw new Error(`Input (s = ${t}) is not tightly packed because i%4 = 3 (i = ${e}))`);const s=(e+t.length-1)%4;if(s!==3)if(s===2)r=r.slice(0,r.length-2);else if(s===1)r=r.slice(0,r.length-4);else throw new Error(`Input (s = ${t}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${e}))`);if(r.length%8!==0)throw new Error("We should never reach here...");const i=new Uint8Array(Math.floor(r.length/8));let a=0;for(let o=0;o<r.length;o+=8){const c=r.slice(o,o+8),d=parseInt(c.join(""),2);i[a++]=d}return new TextDecoder().decode(i)}function ho(t){if(!(t.slice(-1)==="}"||t.slice(-1)===","))throw new Error("Invalid claim");const e=JSON.parse("{"+t.slice(0,-1)+"}");if(Object.keys(e).length!==1)throw new Error("Invalid claim");const r=Object.keys(e)[0];return[r,e[r]]}function fo(t,e){const r=lo(t.value,t.indexMod4),[n,s]=ho(r);if(n!==e)throw new Error(`Invalid field name: found ${n} expected ${e}`);return s}const go=u.struct("ZkLoginSignature",{inputs:u.struct("ZkLoginSignatureInputs",{proofPoints:u.struct("ZkLoginSignatureInputsProofPoints",{a:u.vector(u.string()),b:u.vector(u.vector(u.string())),c:u.vector(u.string())}),issBase64Details:u.struct("ZkLoginSignatureInputsClaim",{value:u.string(),indexMod4:u.u8()}),headerBase64:u.string(),addressSeed:u.string()}),maxEpoch:u.u64(),userSignature:u.vector(u.u8())});function po(t){return go.parse(typeof t=="string"?re(t):t)}function yo({signature:t,signatureScheme:e,publicKey:r}){if(!r)throw new Error("`publicKey` is required");const n=r.toRawBytes(),s=new Uint8Array(1+t.length+n.length);return s.set([Bt[e]]),s.set(t,1),s.set(n,1+t.length),W(s)}function mo(t){const e=re(t),r=no[e[0]];switch(r){case"MultiSig":const n=U.MultiSig.parse(e.slice(1));return{serializedSignature:t,signatureScheme:r,multisig:n,bytes:e};case"ZkLogin":const s=e.slice(1),{inputs:i,maxEpoch:a,userSignature:o}=po(s),{issBase64Details:c,addressSeed:d}=i,h=fo(c,"iss"),l=oo(BigInt(d),h);return{serializedSignature:t,signatureScheme:r,zkLogin:{inputs:i,maxEpoch:a,userSignature:o,iss:h,address:l,addressSeed:BigInt(d)},signature:e};case"ED25519":case"Secp256k1":case"Secp256r1":const g=ro[r],y=e.slice(1,e.length-g),m=e.slice(1+y.length);return{serializedSignature:t,signatureScheme:r,signature:y,publicKey:m,bytes:e};default:throw new Error("Unsupported signature scheme")}}const St=32,wo="suiprivkey";class bo{async signWithIntent(e,r){const n=qn(r,e),s=Ge(n,{dkLen:32});return{signature:yo({signature:await this.sign(s),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:W(e)}}async signTransactionBlock(e){return this.signWithIntent(e,tt.TransactionData)}async signPersonalMessage(e){return this.signWithIntent(u.vector(u.u8()).serialize(e).toBytes(),tt.PersonalMessage)}toSuiAddress(){return this.getPublicKey().toSuiAddress()}}class So extends bo{export(){return{schema:this.getKeyScheme(),privateKey:this.getSecretKey()}}}function To(t,e){if(t.length!==St)throw new Error("Invalid bytes length");const r=Bt[e],n=new Uint8Array(t.length+1);return n.set([r]),n.set(t,1),Mr.encode(wo,Mr.toWords(n))}function Fr(t){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(t)}function xo(t){return Js(t,"")}function Eo(t){return Oe(xo(t))}const vo="ed25519 seed",ko=2147483648,Io=new RegExp("^m(\\/[0-9]+')+$"),Kn=t=>t.replace("'",""),_o=t=>{const r=Gr.create(Zr,vo).update(st(t)).digest(),n=r.slice(0,32),s=r.slice(32);return{key:n,chainCode:s}},Ao=({key:t,chainCode:e},r)=>{const n=new ArrayBuffer(4);new DataView(n).setUint32(0,r);const i=new Uint8Array(1+t.length+n.byteLength);i.set(new Uint8Array(1).fill(0)),i.set(t,1),i.set(new Uint8Array(n,0,n.byteLength),t.length+1);const a=Gr.create(Zr,e).update(i).digest(),o=a.slice(0,32),c=a.slice(32);return{key:o,chainCode:c}},Bo=t=>Io.test(t)?!t.split("/").slice(1).map(Kn).some(isNaN):!1,Wr=(t,e,r=ko)=>{if(!Bo(t))throw new Error("Invalid derivation path");const{key:n,chainCode:s}=_o(e);return t.split("/").slice(1).map(Kn).map(a=>parseInt(a,10)).reduce((a,o)=>Ao(a,o+r),{key:n,chainCode:s})};function Gn(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}class Oo{equals(e){return Gn(this.toRawBytes(),e.toRawBytes())}toBase64(){return W(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){const e=this.toSuiBytes();return W(e)}verifyWithIntent(e,r,n){const s=qn(n,e),i=Ge(s,{dkLen:32});return this.verify(i,r)}verifyPersonalMessage(e,r){return this.verifyWithIntent(U.vector(U.u8()).serialize(e).toBytes(),r,tt.PersonalMessage)}verifyTransactionBlock(e,r){return this.verifyWithIntent(e,r,tt.TransactionData)}toSuiBytes(){const e=this.toRawBytes(),r=new Uint8Array(e.length+1);return r.set([this.flag()]),r.set(e,1),r}toSuiAddress(){return C(Kr(Ge(this.toSuiBytes(),{dkLen:32})).slice(0,it*2))}}const Xt=32;class Zn extends Oo{constructor(e){if(super(),typeof e=="string"?this.data=re(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),this.data.length!==Xt)throw new Error(`Invalid public key input. Expected ${Xt} bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return Bt.ED25519}async verify(e,r){let n;if(typeof r=="string"){const s=mo(r);if(s.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!Gn(this.toRawBytes(),s.publicKey))throw new Error("Signature does not match public key");n=s.signature}else n=r;return ve.sign.detached.verify(e,n,this.toRawBytes())}}Zn.SIZE=Xt;const qr="m/44'/784'/0'/0'/0'";class Ue extends So{constructor(e){super(),e?this.keypair=e:this.keypair=ve.sign.keyPair()}getKeyScheme(){return"ED25519"}static generate(){return new Ue(ve.sign.keyPair())}static fromSecretKey(e,r){const n=e.length;if(n!==St)throw new Error(`Wrong secretKey size. Expected ${St} bytes, got ${n}.`);const s=ve.sign.keyPair.fromSeed(e);if(!r||!r.skipValidation){const a=new TextEncoder().encode("sui validation"),o=ve.sign.detached(a,s.secretKey);if(!ve.sign.detached.verify(a,o,s.publicKey))throw new Error("provided secretKey is invalid")}return new Ue(s)}getPublicKey(){return new Zn(this.keypair.publicKey)}getSecretKey(){return To(this.keypair.secretKey.slice(0,St),this.getKeyScheme())}async sign(e){return this.signData(e)}signData(e){return ve.sign.detached(e,this.keypair.secretKey)}static deriveKeypair(e,r){if(r==null&&(r=qr),!Fr(r))throw new Error("Invalid derivation path");const{key:n}=Wr(r,Eo(e));return Ue.fromSecretKey(n)}static deriveKeypairFromSeed(e,r){if(r==null&&(r=qr),!Fr(r))throw new Error("Invalid derivation path");const{key:n}=Wr(r,e);return Ue.fromSecretKey(n)}}async function Co(t,e){const[,r]=await $e.chainFromRpc(t);return new jo(r,t,Ue.deriveKeypair(e,"m/44'/784'/0'/0'/0'"))}class jo{constructor(e,r,n,s){se(this,"_chain");se(this,"_client");se(this,"_signer");se(this,"_debug");this._chain=e,this._client=r,this._signer=n,this._debug=s}chain(){return this._chain}address(){return this._signer.toSuiAddress()}async signAndSend(e){const r=[];for(const n of e){const{description:s,transaction:i}=n;this._debug&&console.log(`Signing ${s} for ${this.address()}`);const a=await this._client.signAndExecuteTransactionBlock({transactionBlock:i,signer:this._signer});r.push(a.digest)}return r}}const Uo={Address:xe,Platform:$e,getSigner:Co,protocols:{WormholeCore:()=>Pr(()=>import("./index-Wia9RzHk.js"),__vite__mapDeps([0,1,2,3,4])),TokenBridge:()=>Pr(()=>import("./index-tziHKHxR.js"),__vite__mapDeps([5,1,2,0,3,4]))},getChain:(t,e,r)=>new Hn(e,new $e(t,us(t,At,{[e]:r})))},Ko=Object.freeze(Object.defineProperty({__proto__:null,default:Uo},Symbol.toStringTag,{value:"Module"}));export{$e as S,At as _,eo as a,qo as b,Fn as c,Ja as d,Cr as e,Do as f,Ya as g,No as h,Wn as i,Wo as j,$o as k,Ho as l,Vo as m,zo as n,xe as o,Fo as p,Ko as s,Qa as t,Lo as u};
